{% extends "todo_manager/base.html" %}

{% block title %}
    Подробности
{% endblock %}
{% block content %}

    <h3>Детали к записи №{{ obj.id }}</h3>
    {#    {{ api_detail }}#}
    <div class="{% if obj.public %} alert alert-success mt-2 {% else %} alert alert-warning mt-2 {% endif %}">
        <h4>{{ obj.title }}</h4>
        <p class="h6">{{ obj.message }}</p>
        <p class="h6">Дата: {{ obj.time_field }}<br>
            Публично: {{ obj.public }}<br>
            Автор: {{ obj.author }}<br>
            Статус: {{ obj.get_status_display }}
        </p>
    <button type="submit" class="btn btn-success" href="/">Редактировать</button>
    </div>
    <h3>Комментарии</h3>
    {% if obj.public %}
        {% if comments %}
            {% for comment in comments %}
                <div class="alert alert-success mt-2">
                    <figure>
                        <blockquote class="blockquote">
                            <p>{{ comment.comment }}</p>
                        </blockquote>
                        <figcaption class="blockquote-footer"> Автор: {{ comment.author }} </figcaption>
                    </figure>
                </div>
            {% endfor %}
        {% else %}
            <p>Комментариев пока что нет...</p>
        {% endif %}
        <form method="post">
            {% csrf_token %}
            <p>Добавить комментарий: {{ form.comment }}</p>
            <button type="submit" class="btn btn-success">Добавить</button>
        </form>
    {% else %}
        <p>Комментировать можно только публичную запись</p>
    {% endif %}
{% endblock %}
